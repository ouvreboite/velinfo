<mat-card>
  <mat-card-title>Liste des stations Velib</mat-card-title>
  <mat-card-subtitle class="hiddable-smallscreen">{{numberOfStations}} stations</mat-card-subtitle>
  <button disabled="{{isLoading}}" mat-raised-button color="primary" (click)="reload()">↻</button>
  <mat-slide-toggle color="primary" [checked]="onlyBlocked" (change)="filterOnlyBlocked()">Stations bloquées</mat-slide-toggle>
</mat-card>
<table mat-table [dataSource]="dataSource" matSortActive="name" matSortDirection="asc" matSort class="mat-elevation-z8">
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Station</th>
    <td mat-cell *matCellDef="let station">{{station.name}}</td>
  </ng-container>

  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
    <td mat-cell *matCellDef="let station"> 
      <app-station-status [station]="station"></app-station-status>
    </td>
  </ng-container>

  <ng-container matColumnDef="occupation">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Occupation</th>
    <td mat-cell *matCellDef="let station"> 
      <app-station-availability-bar [station]="station"></app-station-availability-bar>
    </td>
  </ng-container>

  <ng-container matColumnDef="lastActivityAgo">
    <th class="hiddable-smallscreen" mat-header-cell *matHeaderCellDef mat-sort-header>⏱️ Dernière activité</th>
    <td class="hiddable-smallscreen" mat-cell *matCellDef="let station"> {{station.lastActivityAgo}} </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
  <tr mat-row *matRowDef="let station; columns: displayedColumns;" [routerLink]="'/station/'+station.code" class="row-hover"></tr>
</table>
  


<mat-card *ngIf="isLoading" style="display: flex; justify-content: center; align-items: center">
  <mat-progress-spinner 
    color="primary" 
    mode="indeterminate">
  </mat-progress-spinner>
</mat-card>
